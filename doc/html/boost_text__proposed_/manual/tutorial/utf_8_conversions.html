<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>UTF-8 Conversions</title>
<link rel="stylesheet" href="../../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="../../../index.html" title="Chapter&#160;1.&#160;Boost.Text (Proposed)">
<link rel="up" href="../tutorial.html" title="Tutorial">
<link rel="prev" href="boost_text_string_types.html" title="Boost Text String Types">
<link rel="next" href="../examples.html" title="Examples">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="spirit-nav">
<a accesskey="p" href="boost_text_string_types.html"><img src="../../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../tutorial.html"><img src="../../../images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../images/home.png" alt="Home"></a><a accesskey="n" href="../examples.html"><img src="../../../images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h4 class="title">
<a name="boost_text__proposed_.manual.tutorial.utf_8_conversions"></a><a class="link" href="utf_8_conversions.html" title="UTF-8 Conversions">UTF-8
        Conversions</a>
</h4></div></div></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
            Boost.Text's UTF-8 support is based on the Unicode 9 standard.
          </p></td></tr>
</table></div>
<p>
          Boost.Text provides eight converting iterators:
        </p>
<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; ">
<li class="listitem">
              <code class="computeroutput"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Iter</span><span class="special">&gt;</span> <span class="keyword">struct</span>
              <span class="identifier">from_utf16_iterator</span></code>
            </li>
<li class="listitem">
              <code class="computeroutput"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Iter</span><span class="special">&gt;</span> <span class="keyword">struct</span>
              <span class="identifier">from_utf16_iterator_throwing</span></code>
            </li>
<li class="listitem">
              <code class="computeroutput"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Iter</span><span class="special">&gt;</span> <span class="keyword">struct</span>
              <span class="identifier">from_utf32_iterator</span></code>
            </li>
<li class="listitem">
              <code class="computeroutput"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Iter</span><span class="special">&gt;</span> <span class="keyword">struct</span>
              <span class="identifier">from_utf32_iterator_throwing</span></code>
            </li>
<li class="listitem">
              <code class="computeroutput"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Iter</span><span class="special">&gt;</span> <span class="keyword">struct</span>
              <span class="identifier">to_utf16_iterator</span></code>
            </li>
<li class="listitem">
              <code class="computeroutput"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Iter</span><span class="special">&gt;</span> <span class="keyword">struct</span>
              <span class="identifier">to_utf16_iterator_throwing</span></code>
            </li>
<li class="listitem">
              <code class="computeroutput"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Iter</span><span class="special">&gt;</span> <span class="keyword">struct</span>
              <span class="identifier">to_utf32_iterator</span></code>
            </li>
<li class="listitem">
              <code class="computeroutput"><span class="keyword">template</span><span class="special">&lt;</span><span class="keyword">typename</span> <span class="identifier">Iter</span><span class="special">&gt;</span> <span class="keyword">struct</span>
              <span class="identifier">to_utf32_iterator_throwing</span></code>
            </li>
</ul></div>
<p>
          The ones with <code class="computeroutput"><span class="identifier">throwing</span></code>
          in the name throw an exception when encoutering an invalid encoding.
        </p>
<p>
          The other ones produce the Unicode replacement character <code class="computeroutput"><span class="number">0xFFFD</span></code> when encoutering an invalid encoding.
          These are the ones that Boost.Text uses internally when performing conversions.
        </p>
<p>
          The Unicode standard is flexible with respect to where, in an incoming
          stream, encoding errors are repored. However, the standard provides recommendations
          for where within a stream, and how frequently within that stream, errors
          should be reported. Boost.Text's converting iterators follow the Unicode
          recommendations. See Unicode 9, "Best Practices for Using U+FFFD"
          and Table 3-8.
        </p>
<p>
          The converting iterators are pretty straightforward, but there are some
          caveats:
        </p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem">
              Since UTF-8 and UTF-16 are multi-character encodings, simply incrementing
              or decrementing the iterator requires reading the underlying sequence
              in order to determine how far to advance within the input sequence.
              The iterator does not know where the end of the sequence is, so you
              may need to check this if there is doubt about the validity of the
              encoding.
            </li>
<li class="listitem">
              Because each of these converting iterators does a substantial amount
              of work in increment and decrement operations, including in some cases
              caching the result of reading several characters of a multi-character
              encoding, post-increment and pot-decrement can be quite a bit more
              expensive than pre-increment and pre-decrement.
            </li>
</ol></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../../../images/note.png"></td>
<th align="left">Note</th>
</tr>
<tr><td align="left" valign="top"><p>
            The <code class="computeroutput"><span class="identifier">to_utf32_iterator</span></code>
            converting iterator can be used to iterate across Unicode code points
            in the Boost.Text string types.
          </p></td></tr>
</table></div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2017 T. Zachary Laine<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="boost_text_string_types.html"><img src="../../../images/prev.png" alt="Prev"></a><a accesskey="u" href="../tutorial.html"><img src="../../../images/up.png" alt="Up"></a><a accesskey="h" href="../../../index.html"><img src="../../../images/home.png" alt="Home"></a><a accesskey="n" href="../examples.html"><img src="../../../images/next.png" alt="Next"></a>
</div>
</body>
</html>
